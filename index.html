<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elliptangle</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #f0f0f0;
            font-family: Arial, sans-serif;
        }
        canvas {
            border: 2px solid #333;
            background: gray;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .controls {
            margin: 20px 0;
        }
        .control-group {
            margin: 10px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        label {
            min-width: 120px;
            font-weight: bold;
        }
        input[type="range"] {
            width: 200px;
        }
        input[type="text"] {
            width: 200px;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        input[type="color"] {
            width: 50px;
            height: 30px;
            border: none;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>Elliptangle Renderer</h1>
    <canvas id="canvas" width="600" height="400"></canvas>
    
    <div class="controls">
        <div class="control-group">
            <label>Activation:</label>
            <input type="range" id="activation" min="0" max="100" value="80">
            <span id="activationValue">80</span>
        </div>
        <div class="control-group">
            <label>Curve Amount:</label>
            <input type="range" id="curveAmount" min="0" max="50" value="20">
            <span id="curveValue">20</span>
        </div>
        <div class="control-group">
            <label>Width:</label>
            <input type="range" id="width" min="100" max="400" value="250">
            <span id="widthValue">250</span>
        </div>
        <div class="control-group">
            <label>Height:</label>
            <input type="range" id="height" min="80" max="300" value="150">
            <span id="heightValue">150</span>
        </div>
        <div class="control-group">
            <label>Fill Color:</label>
            <input type="color" id="fillColor" value="#4CAF50">
        </div>
        <div class="control-group">
            <label>Top/Left Stroke:</label>
            <input type="color" id="topLeftStroke" value="#81C784">
        </div>
        <div class="control-group">
            <label>Bottom/Right Stroke:</label>
            <input type="color" id="bottomRightStroke" value="#2E7D32">
        </div>
        <div class="control-group">
            <label>Stroke Width:</label>
            <input type="range" id="strokeWidth" min="1" max="10" value="3">
            <span id="strokeWidthValue">3</span>
        </div>
        <div class="control-group">
            <label>Text:</label>
            <input type="text" id="text" value="Hello" placeholder="Enter text...">
        </div>
        <div class="control-group">
            <label>Text Color:</label>
            <input type="color" id="textColor" value="#FFFFFF">
        </div>
        <div class="control-group">
            <label>Font Size Ratio:</label>
            <input type="range" id="fontSizeRatio" min="0.1" max="0.8" step="0.05" value="0.3">
            <span id="fontSizeRatioValue">0.3</span>
        </div>
    </div>

    <script type="module" src="dist/main.js"></script>
    <script type="module">
        const canvas = document.getElementById('canvas');
        const renderer = new ElliptangleRenderer(canvas);
        
        // Control elements
        const activation = document.getElementById('activation');
        const curveAmount = document.getElementById('curveAmount');
        const width = document.getElementById('width');
        const height = document.getElementById('height');
        const fillColor = document.getElementById('fillColor');
        const topLeftStroke = document.getElementById('topLeftStroke');
        const bottomRightStroke = document.getElementById('bottomRightStroke');
        const strokeWidth = document.getElementById('strokeWidth');
        const text = document.getElementById('text');
        const textColor = document.getElementById('textColor');
        const fontSizeRatio = document.getElementById('fontSizeRatio');
        
        // Value display elements
        const activationValue = document.getElementById('activationValue');
        const curveValue = document.getElementById('curveValue');
        const widthValue = document.getElementById('widthValue');
        const heightValue = document.getElementById('heightValue');
        const strokeWidthValue = document.getElementById('strokeWidthValue');
        const fontSizeRatioValue = document.getElementById('fontSizeRatioValue');

        function adjustActivation() {
            activationValue.textContent = activation.value;
            curveAmount.value = 2000.0 / activation.value; // Adjust curve amount based on activation
            width.value = Math.max(100, activation.value * 3.5); // Adjust width based on activation
            height.value = Math.max(80, activation.value * 2.5); // Adjust
        }

        function render() {
            // Clear canvas
            renderer.clear();
            
            // Get current values
            const curve = parseInt(curveAmount.value);
            const w = parseInt(width.value);
            const h = parseInt(height.value);
            const strokeW = parseInt(strokeWidth.value);
            
            // Update value displays
            curveValue.textContent = curve;
            widthValue.textContent = w;
            heightValue.textContent = h;
            strokeWidthValue.textContent = strokeW;
            fontSizeRatioValue.textContent = parseFloat(fontSizeRatio.value).toFixed(2);
            
            // Center the elliptangle
            const x = (canvas.width - w) / 2;
            const y = (canvas.height - h) / 2;
            
            // Draw the elliptangle
            renderer.drawElliptangleWithSeparateStrokes(x, y, w, h, curve, {
                fillColor: fillColor.value,
                topLeftStroke: topLeftStroke.value,
                bottomRightStroke: bottomRightStroke.value,
                strokeWidth: strokeW,
                text: text.value,
                textColor: textColor.value,
                fontSizeRatio: parseFloat(fontSizeRatio.value)
            });
        }

        // Add event listeners
        activation.addEventListener('input', () => {
            adjustActivation();
            render();
        });

        [curveAmount, width, height, fillColor, topLeftStroke, bottomRightStroke, strokeWidth, text, textColor, fontSizeRatio].forEach(control => {
            control.addEventListener('input', render);
        });

        // Initial render
        render();
    </script>
</body>
</html>